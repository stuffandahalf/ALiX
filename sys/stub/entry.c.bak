#include <sys/dev.h>

__asm__(".code16");

//extern struct cdev vgacons;

void real_print(char *str);

void
_start(void)
{
	real_print("Hello World!\r\n");
}

void
real_print1(char *str)
{
	/*char *c;
	for (c = str; *c != '\0'; c++) {
		__asm__(
			"int $0x10\n\t"
			:
			: "a"(0x0e00 | *c)
		);
	}*/

	__asm__ __volatile__(
		"movb $0x0e, %%ah\n"
		"1:\n\t"
		"lodsb\n\t"
		"testb %%al, %%al\n\t"
		"jz 2f\n\t"
		"int $0x10\n\t"
		"jmp 1b\n"
		"2:\n\t"
		:
		: "S"(str)
		: "ax"
	);
}

void
real_print2(char *str)
{
	char *c;
	for (c = str; *c != '\0'; c++) {
		__asm__ __volatile__(
			"int $0x10\n\t"
			:
			: "a"(0x1e00 | *c)
		);
	}
}
